{% extends 'admin/master.html' %}
{% block head %}
  <script src="{{ url_for('static', filename='build/flask_admin.min.js') }}"></script>
  <script>
    {% set stats = get_stats() %}
    window.onload = function () {
      var ctxLog = document.getElementById("chartLog");
      var data = {
        labels: [
          "FRA", "CM", "Ecoles", "SI"
        ],
        datasets: [
          {
            label: "FRA",
            backgroundColor: 'rgba(255, 99, 132, 0.4)',
            data: {{ stats.get('fra').values() }}
          }, {
            label: "CM",
            backgroundColor: 'rgba(54, 162, 235, 0.4)',
            data: {{ stats.get('cm').values() }}
          }, {
            label: "Ecoles",
            backgroundColor: 'rgba(75, 192, 192, 0.4)',
            data: {{ stats.get('school').values() }}
          }, {
            label: "SI",
            backgroundColor: 'rgba(255, 206, 86, 0.4)',
            data: {{ stats.get('si').values() }}
          }
        ]
      };
      var chartLog = new Chart(ctxLog, {
        type: 'bar',
        data: data,
        options: {
          barValueSpacing: 20,
          scales: {
            yAxes: [
              {
                ticks: {
                  min: 0,
                  max: 110
                }
              }
            ]
          }
        }
      });
    }
  </script>
{% endblock %}
{% block body %}
  <canvas id="chartLog" class="model-list"></canvas>
{% endblock %}
